<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:0;background:#f5f5f5}
    .navbar{background:#333;color:#fff;padding:10px;display:flex;justify-content:space-around}
    .navbar button{background:none;border:none;color:#fff;cursor:pointer;font-size:16px}
    .section{display:none;padding:20px}
    .active{display:block}
 
    .app-card{border:1px solid #ccc;padding:12px;margin:12px 0;border-radius:6px;background:#fff}
    .status{font-weight:600}
    table,th,td{border:1px solid #ddd;border-collapse:collapse;padding:8px}
    table{width:100%;margin-top:10px}
  </style>
</head>
<body>
  <div class="navbar">
    <div class="logo"><svg fill="none" width="10vh" height="5vh" viewBox="0 0 35 35" class="browserSupportLogo" xmlns="http://www.w3.org/2000/svg"><path fill="#F55533" fill-rule="evenodd" clip-rule="evenodd" d="M35 0H0V15.4412C0 23.1899 4.78063 30.1364 12.0191 32.905L17.5 35L22.9809 32.905C30.2194 30.1364 35 23.1899 35 15.4412V0ZM24.7059 12.3529C24.7059 16.3319 21.4797 19.5588 17.5 19.5588C13.5203 19.5588 10.2941 16.3319 10.2941 12.3529C10.2941 8.37402 13.5203 5.14706 17.5 5.14706H24.7059V12.3529ZM17.5 15.4412C19.2056 15.4412 20.5882 14.0579 20.5882 12.3529C20.5882 10.648 19.2056 9.26471 17.5 9.26471C15.7944 9.26471 14.4118 10.648 14.4118 12.3529C14.4118 14.0579 15.7944 15.4412 17.5 15.4412ZM10.2941 25.7353C10.2941 23.4613 12.1377 21.6176 14.4118 21.6176H24.7059C24.7059 23.8916 22.8623 25.7353 20.5882 25.7353H10.2941Z"></path></svg>
      GRADIOUS Admin  </div>
    <button onclick="showSection('verify')">Verify Applications</button>
    <button onclick="showSection('manage')">Manage Courses</button>
  </div>

  <div id="verify" class="section">
    <h2>Approve / Reject Applications</h2>
    <div id="applicationList"></div>
  </div>

  <div id="manage" class="section">
    <h2>Manage Courses / Branches</h2>

    <h3>Add Program</h3>
    <input type="text" id="programInput" placeholder="Program name" />
    <button onclick="addProgram()">Add Program</button>

    <h3>Programs</h3>
    <div id="programList"></div>
  </div>

  <script>

  const ESC_MAP = { "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" };
  function escapeHtml(str=""){ return str.replace(/[&<>"']/g,ch=>ESC_MAP[ch]); }

  function showSection(id){
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }


  let applications = JSON.parse(localStorage.getItem('applications')||'[]');

  function statusIcon(st){
    if(st==="Approved") return {icon:"✅",color:"green"};
    if(st==="Rejected") return {icon:"❌",color:"crimson"};
    return {icon:"⏳",color:"orange"};
  }

  function renderApplications(){
    const c = document.getElementById('applicationList');
    if(applications.length===0){ c.innerHTML='<p>No applications found.</p>'; return; }

    c.innerHTML = applications.map((app,i)=>{
      const {icon,color}=statusIcon(app.status);
      return `
      <div class="app-card">
        <p><strong>Name:</strong> ${escapeHtml(app.fullName)}</p>
        <p><strong>App&nbsp;ID:</strong> ${escapeHtml(app.appId)}</p>
        <p><strong>Time:</strong> ${escapeHtml(app.timeRegistered)}</p>
        <p><strong>Status:</strong> <span class="status" style="color:${color}">${icon} ${app.status||'Pending'}</span></p>

        <textarea id="remark-${i}" placeholder="Add remarks…" style="width:100%;min-height:60px">${escapeHtml(app.remark||'')}</textarea><br/>
        <button onclick="updateStatus(${i},'Approved')">Approve</button>
        <button onclick="updateStatus(${i},'Rejected')">Reject</button>
      </div>`;
    }).join('');
  }

  function updateStatus(i,newStatus){
    applications[i].status = newStatus;
    applications[i].remark = document.getElementById(`remark-${i}`).value.trim();
    localStorage.setItem('applications',JSON.stringify(applications));
    renderApplications();           
  }


  let programs = JSON.parse(localStorage.getItem('programs')||'[]');

  function addProgram(){
    const val = document.getElementById('programInput').value.trim();
    if(val && !programs.find(p=>p.name===val)){
      programs.push({name:val,branches:[]});
      localStorage.setItem('programs',JSON.stringify(programs));
      document.getElementById('programInput').value="";
      // renderPrograms();
      alert("Coming Soon");
    }
  }

  function addBranch(pi){
    const inp = document.getElementById(`branchInput-${pi}`);
    const branch = inp.value.trim();
    if(branch && !programs[pi].branches.includes(branch)){
      programs[pi].branches.push(branch);
      localStorage.setItem('programs',JSON.stringify(programs));
      inp.value="";
      renderPrograms();
    }
  }

  function deleteBranch(pi,bi){
    programs[pi].branches.splice(bi,1);
    localStorage.setItem('programs',JSON.stringify(programs));
    renderPrograms();
  }

  function renderPrograms(){
    const c = document.getElementById('programList');
    c.innerHTML = programs.map((p,i)=>`
      <div style="margin-bottom:18px;border:1px solid #ccc;padding:10px;background:#fff;border-radius:6px">
        <h4>${escapeHtml(p.name)}</h4>
        <input type="text" id="branchInput-${i}" placeholder="New Branch" />
        <button onclick="addBranch(${i})">Add Branch</button>
        <ul>
          ${p.branches.map((b,j)=>`<li>${escapeHtml(b)} <button onclick="deleteBranch(${i},${j})">❌</button></li>`).join('')}
        </ul>
      </div>`).join('');
  }

  
  renderApplications();
  renderPrograms();
  showSection('verify');  
  </script>
</body>
</html>
